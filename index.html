<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Shared Task Board</title>
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#2563eb">
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="app-container">
    <nav class="sidebar">
      <div class="sidebar-header">
        <h2>TaskLedger</h2>
      </div>
      <ul class="nav-links">
        <li><a href="#" class="nav-link active" data-view="tasks">âœ… Tasks</a></li>
        <li><a href="#" class="nav-link" data-view="memos">ğŸ“ Memos</a></li>
        <li><a href="#" class="nav-link" data-view="needs">ğŸ“Œ Needs</a></li>
        <li><a href="#" class="nav-link" data-view="updates">ğŸ“£ Updates</a></li>
        <li><a href="#" class="nav-link" data-view="completed">ğŸ‰ Completed</a></li>
      </ul>
      <div class="notifications-trigger" onclick="toggleNotificationsPanel()">
        <span class="notification-icon">ğŸ””</span>
        <span class="notification-badge" id="notificationBadge" style="display: none;">0</span>
      </div>
    </nav>

    <aside class="notifications-panel" id="notificationsPanel">
      <div class="notifications-header">
        <h3>Notifications</h3>
        <button class="close-notifications" onclick="toggleNotificationsPanel()">âœ•</button>
      </div>
      <div class="notifications-body" id="notificationsList">
        <p class="no-notifications">No new notifications</p>
      </div>
    </aside>

    <main class="main-content">
      <div id="tasks-view" class="view active">
        <div class="view-header">
          <h1>Task Board</h1>
          <button class="add-task-btn" onclick="openAddTaskModal()">+ Add Task</button>
        </div>
        <section id="taskList"></section>
      </div>

      <div id="memos-view" class="view">
        <h1>Memos</h1>
        <section id="memoList"></section>
      </div>

      <div id="needs-view" class="view">
        <h1>Aggregated Needs</h1>
        <section id="needsList"></section>
      </div>

      <div id="completed-view" class="view">
        <h1>Completed Tasks</h1>
        <section id="completedList"></section>
      </div>

      <div id="updates-view" class="view">
        <h1>Updates Feed</h1>
        <section id="updatesList"></section>
      </div>
    </main>
  </div>

  <div id="addTaskModal" class="modal-overlay">
    <div class="modal-content">
      <h2>Add New Task</h2>
      <input id="taskTitle" placeholder="Task title" />
      <textarea id="taskDescription" placeholder="Full memo/description for this task"></textarea>
      <textarea id="taskNotes" placeholder="Private notes (not part of the memo)"></textarea>
      <textarea id="taskNeeds" placeholder="What I need from you (one per line)"></textarea>
      <div class="priority-selector">
        <label for="taskPriority">Priority Level:</label>
        <select id="taskPriority">
          <option value="high">ğŸ”´ High - Urgent</option>
          <option value="medium" selected>ğŸŸ¡ Medium - Moderate</option>
          <option value="low">ğŸŸ¢ Low - Can wait</option>
        </select>
      </div>
      <div class="modal-actions">
        <button onclick="addTask()">Add Task</button>
        <button class="secondary" onclick="closeAddTaskModal()">Cancel</button>
      </div>
    </div>
  </div>

  <div id="completionModal" class="modal-overlay">
    <div class="modal-content">
      <h2>Task Complete!</h2>
      <p>Add any relevant completion notes, links, or details below.</p>
      <textarea id="completionNotes" placeholder="e.g., Deployed to production, link to report, etc."></textarea>
      <div class="modal-actions">
        <button onclick="saveCompletionDetails()">Save & Complete</button>
        <button class="secondary" onclick="closeCompletionModal()">Cancel</button>
      </div>
    </div>
  </div>

  <div id="updateModal" class="modal-overlay">
    <div class="modal-content">
      <h2>Post Progress Update</h2>
      <p id="updateTaskTitle"></p>
      <textarea id="updateText" placeholder="What progress have you made on this task?"></textarea>
      <div class="modal-actions">
        <button onclick="saveUpdate()">Post Update</button>
        <button class="secondary" onclick="closeUpdateModal()">Cancel</button>
      </div>
    </div>
  </div>

  <script type="module" src="firebase-config.js"></script>
  <script type="module" src="script.js"></script>
</body>
</html>
